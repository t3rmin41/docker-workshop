Online resources:

goo.gl/dazTeg
github.com/oxyo

Bitvise SSH Client 7.39

RedHat login:
user:guru
pass:work

Linux commands:

sudo -i
hostnamectl
sudo unshare --fork --pid --mount-proc bash

locate docker // list binary usage files, configs, etc
systemctl status docker //
journalctl -u docker //show docker logs
journalctl -u docker -f //show docker logs in real-time (-f : follow)

Docker is not virtualization, it's namespace based containerization tool working on root, 
Docker daemon uses root account


VBox host network manager
Adapter IP: 10.0.0.101
DHCP server address: 10.0.0.102
Mask: 255.255.255.0
Address range:
10.0.0.103/10.0.0.200

Docker commands (DOCKER COMMANDS)

docker info

docker container ls (list active containers)

Run container (-ti : interactive, alpine : linux distributive, ash - alpine shell)
docker container run -ti --name demo alpine ash

[root@d1 guru]# docker container ls
CONTAINER ID        IMAGE               COMMAND             CREATED              STATUS              PORTS               NAMES
a209e1f9c398        alpine              "ash"               About a minute ago   Up About a minute                       demo
[root@d1 guru]# docker logs demo (demo : container namespace)

docker logs demo -f (-f : follow) // show container activity in other window

docker container ls -a (-a : all, not only active container)

[guru@d1 ~]$ docker container ls -a
CONTAINER ID        IMAGE               COMMAND                  CREATED             STATUS                      PORTS               NAMES
a209e1f9c398        alpine              "ash"                    5 minutes ago       Exited (0) 43 seconds ago                       demo
3cde5267af92        centos              "hostname"               4 days ago          Exited (0) 4 days ago                           dazzling_darwin
1f05aa402263        centos:7            "/bin/bash"              4 days ago          Exited (0) 4 days ago                           priceless_roentgen
33821ef1dfbe        ubuntu:16.04        "/bin/bash"              4 days ago          Exited (0) 4 days ago                           musing_mirzakhani
4b64cef7cd1f        ubuntu:14.04        "/bin/bash"              4 days ago          Exited (0) 4 days ago                           musing_shockley
d7f865385767        busybox             "echo 'hello from bu…"   4 days ago          Exited (0) 4 days ago                           epic_kilby
b5b31a066bb5        busybox             "sh"                     4 days ago          Exited (0) 4 days ago                           optimistic_poitras
e50bb2219d09        ubuntu              "/bin/bash"              5 days ago          Exited (0) 5 days ago                           hungry_banach
b9aff0270ac2        centos              "/bin/bash"              5 days ago          Exited (0) 5 days ago                           eloquent_darwin
[guru@d1 ~]$
[guru@d1 ~]$
[guru@d1 ~]$
[guru@d1 ~]$ docker start demo
demo
[guru@d1 ~]$ docker container ls
CONTAINER ID        IMAGE               COMMAND             CREATED             STATUS              PORTS               NAMES
a209e1f9c398        alpine              "ash"               7 minutes ago       Up 12 seconds                           demo
[guru@d1 ~]$


Remove docker container
[guru@d1 ~]$ docker container ls -a //list containers
CONTAINER ID        IMAGE               COMMAND                  CREATED             STATUS                     PORTS               NAMES
43bd39346358        centos              "hostname"               2 minutes ago       Exited (0) 2 minutes ago                       friendly_thompson
6125ac8de6ba        centos              "echo kuku"              2 minutes ago       Exited (0) 2 minutes ago                       inspiring_bhabha
a209e1f9c398        alpine              "ash"                    36 minutes ago      Up 29 minutes                                  demo
3cde5267af92        centos              "hostname"               4 days ago          Exited (0) 4 days ago                          dazzling_darwin
1f05aa402263        centos:7            "/bin/bash"              5 days ago          Exited (0) 5 days ago                          priceless_roentgen
33821ef1dfbe        ubuntu:16.04        "/bin/bash"              5 days ago          Exited (0) 5 days ago                          musing_mirzakhani
4b64cef7cd1f        ubuntu:14.04        "/bin/bash"              5 days ago          Exited (0) 5 days ago                          musing_shockley
d7f865385767        busybox             "echo 'hello from bu…"   5 days ago          Exited (0) 5 days ago                          epic_kilby
b5b31a066bb5        busybox             "sh"                     5 days ago          Exited (0) 5 days ago                          optimistic_poitras
e50bb2219d09        ubuntu              "/bin/bash"              5 days ago          Exited (0) 5 days ago                          hungry_banach
b9aff0270ac2        centos              "/bin/bash"              5 days ago          Exited (0) 5 days ago                          eloquent_darwin
[guru@d1 ~]$
[guru@d1 ~]$
[guru@d1 ~]$ docker rm demo
Error response from daemon: You cannot remove a running container a209e1f9c398e7ca9024f2893201b9114f4ed543ffddd0b7722b1abe7b09ea7d. Stop the container before attempting removal or force remove
[guru@d1 ~]$
[guru@d1 ~]$
[guru@d1 ~]$
[guru@d1 ~]$ docker rm -f demo
demo
[guru@d1 ~]$
[guru@d1 ~]$
[guru@d1 ~]$
[guru@d1 ~]$ docker container ls -a
CONTAINER ID        IMAGE               COMMAND                  CREATED             STATUS                     PORTS               NAMES
43bd39346358        centos              "hostname"               2 minutes ago       Exited (0) 2 minutes ago                       friendly_thompson
6125ac8de6ba        centos              "echo kuku"              2 minutes ago       Exited (0) 2 minutes ago                       inspiring_bhabha
3cde5267af92        centos              "hostname"               4 days ago          Exited (0) 4 days ago                          dazzling_darwin
1f05aa402263        centos:7            "/bin/bash"              5 days ago          Exited (0) 5 days ago                          priceless_roentgen
33821ef1dfbe        ubuntu:16.04        "/bin/bash"              5 days ago          Exited (0) 5 days ago                          musing_mirzakhani
4b64cef7cd1f        ubuntu:14.04        "/bin/bash"              5 days ago          Exited (0) 5 days ago                          musing_shockley
d7f865385767        busybox             "echo 'hello from bu…"   5 days ago          Exited (0) 5 days ago                          epic_kilby
b5b31a066bb5        busybox             "sh"                     5 days ago          Exited (0) 5 days ago                          optimistic_poitras
e50bb2219d09        ubuntu              "/bin/bash"              5 days ago          Exited (0) 5 days ago                          hungry_banach
b9aff0270ac2        centos              "/bin/bash"              5 days ago          Exited (0) 5 days ago                          eloquent_darwin
[guru@d1 ~]$

Run docker container as daemon (-p 80:80 [port mapping from-to container, -h web1 : "web1" will be seen inside container)
docker run -d -p 80:80 --name web1 -h web1 nginx

Attach to web1:
docker attach web1

Deattach from attached processes (kill all detaches)
sudo pkill -9 -f 'docker.*attach'

Initiate shell session to container:
docker exec -ti web1 bash

Stop container:
[guru@d1 ~]$ docker stop web1
web1
[guru@d1 ~]$
[guru@d1 ~]$
[guru@d1 ~]$
[guru@d1 ~]$ docker container ls
CONTAINER ID        IMAGE               COMMAND             CREATED             STATUS              PORTS               NAMES
[guru@d1 ~]$


connect to container:
1. Start container:
docker start [containerName]
2. Connect to container with bash
docker exec -ti [containerName] bash

Build Docker containers:

[guru@d1 ~/projects]$ git clone https://github.com/oxyo/node-backend.git
[guru@d1 ~/projects]$ cd node-backend/
[guru@d1 node-backend]$ ls -la
total 40
drwxrwxr-x. 4 guru guru   161 Mar 26 13:55 .
drwxrwxr-x. 3 guru guru    26 Mar 26 13:37 ..
-rw-rw-r--. 1 guru guru  3267 Mar 26 13:51 app.js
drwxrwxr-x. 2 guru guru    23 Mar 26 13:38 db
-rw-rw-r--. 1 guru guru   387 Mar 26 13:38 Dockerfile
-rw-rw-r--. 1 guru guru    27 Mar 26 13:38 .dockerignore
drwxrwxr-x. 8 guru guru   163 Mar 26 13:38 .git
-rw-rw-r--. 1 guru guru   112 Mar 26 13:38 .gitignore
-rw-rw-r--. 1 guru guru   396 Mar 26 13:50 package.json
-rw-rw-r--. 1 guru guru 14397 Mar 26 13:38 package-lock.json
-rw-rw-r--. 1 guru guru  1141 Mar 26 13:38 README.md
[guru@d1 node-backend]$
[guru@d1 node-backend]$
[guru@d1 node-backend]$
[guru@d1 node-backend]$ docker build . -t skills-api:0.0.1

[guru@d1 node-backend]$ docker images
REPOSITORY          TAG                 IMAGE ID            CREATED             SIZE
skills-api          0.0.1               30dc1c6c219e        17 seconds ago      715MB
t3rmin41/mydev      v2                  28b12932ccce        43 minutes ago      216MB
node                carbon              41a1f5b81103        9 days ago          673MB
centos              latest              2d194b392dd1        2 weeks ago         195MB
[guru@d1 node-backend]$
[guru@d1 node-backend]$

docker run -d -p 80:3000 -v ~/projects/node-backend/db:/db:Z skills-api:0.0.1 // :Z - selinux flag
